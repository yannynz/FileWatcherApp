[BOOT] Environment=Production ConfigFiles=appsettings.json, appsettings.Production.json
[BOOT] OS=Debian GNU/Linux 13 (trixie) Arch=X64 Machine=ynz
[BOOT] Scoring=19 NumCurvesWeight=0.6 ExtraThresholds=4 FirstExtra=140/0.25 StepWeight=0.2
info: FileWatcherApp.Messaging.RabbitMqConnection[0]
      RabbitMQ conectado em 192.168.10.13:5672 vhost=/
info: FileWatcherApp.Messaging.RpcPingResponderService[0]
      RPC responder ouvindo fila filewatcher.rpc.ping
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [BOOT] FileWatcherService em Debian GNU/Linux 13 (trixie) (X64) Machine='ynz'
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [CFG] Pastas monitoradas: Laser='/tmp/fw/laser' Facas='/tmp/fw/facas' Dobras='/tmp/fw/dobras' Ops='/tmp/fw/ops' Destacador='/tmp/fw/laser/DESTACADOR'
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [WATCHER-LASER] Ativo em '/tmp/fw/laser' (Queue=laser_notifications)
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [WATCHER-FACAS] Ativo em '/tmp/fw/facas' (Queue=facas_notifications)
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [WATCHER-DOBRAS] Ativo em '/tmp/fw/dobras' (Queue=dobra_notifications)
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [WATCHER-OPS] Ativo em '/tmp/fw/ops' (Queue=op.imported)
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      Iniciando DXFAnalysisWorker... fila=facas.analysis.request paralelismo=4
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      Config imagem: persistLocal=False storageEnabled=True provider=s3 endpoint=http://192.168.10.13:9000 bucket=facas-renders keyPrefix=renders
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Production
info: Microsoft.Hosting.Lifetime[0]
      Content root path: /home/ynz/Documents/FileWatcherApp
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [WATCHER-DOBRAS] Created file='NR120184.dxf' dir='/tmp/fw/dobras' full='/tmp/fw/dobras/NR120184.dxf'
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [PROCESS-DOBRAS] DOBRAS arquivo='NR 120184.DXF' (orig='NR120184.dxf') path='/tmp/fw/dobras/NR120184.dxf' queue=dobra_notifications
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [WATCHER-DOBRAS] Changed file='NR120184.dxf' dir='/tmp/fw/dobras' full='/tmp/fw/dobras/NR120184.dxf'
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [PROCESS-DOBRAS] DOBRAS arquivo='NR 120184.DXF' (orig='NR120184.dxf') path='/tmp/fw/dobras/NR120184.dxf' queue=dobra_notifications
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [DOBRAS] Análise solicitada (NR=120184) a partir de 'NR120184.dxf'
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      [DOBRAS] Análise solicitada (NR=120184) a partir de 'NR120184.dxf'
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      DXF /tmp/fw/dobras/NR120184.dxf reloaded with header upgrade (AutoCAD 2000 fallback)
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      DXF /tmp/fw/dobras/NR120184.dxf reloaded with header upgrade (AutoCAD 2000 fallback)
[SCORER-CONFIG] NumCurvesWeight=0.6 ExtraThresholds=4 Step=(45,0.2,1.2) Dangling=4 MinRadiusDanger=0.35 SerrilhaPresence=0.65 ColaWeight=0.45
info: FileWatcherApp.Services.DXFAnalysis.ComplexityScorer[0]
      [SCORER] Pesos carregados | NumCurvesWeight=0.6 ExtraThresholds=4 Step=(45,0.2,1.2) DanglingThresholds=4 MinRadiusDanger=0.35 SerrilhaPresence=0.65 ColaWeight=0.45
[CURVES] Extra threshold hit: curves=266 >= 140 weight=0.25
[CURVES] Extra threshold hit: curves=266 >= 220 weight=0.35
[CURVES] Step contribution: curves=266 extra=206 steps=4.58 weight=0.92
info: FileWatcherApp.Services.DXFAnalysis.Rendering.CalibratedDxfRenderer[0]
      Render DXF /tmp/fw/dobras/NR120184.dxf: Bounding box global utilizado (faca não encontrada): xMin=-26.999, xMax=3194.907, yMin=-35.000, yMax=922.116, largura=3221.906, altura=957.116
info: FileWatcherApp.Services.DXFAnalysis.Rendering.CalibratedDxfRenderer[0]
      Render DXF /tmp/fw/dobras/NR120184.dxf: escala=0.620751 px/unid | offset=(26.999, 35.000) | padding≈(0.0%, 0.1%) | área renderizada=(3221.906 x 957.116)
info: FileWatcherApp.Services.DXFAnalysis.Rendering.CalibratedDxfRenderer[0]
      Render DXF /tmp/fw/dobras/NR120184.dxf: 3282 primitivas renderizadas (sem filtro).
info: FileWatcherApp.Services.DXFAnalysis.Rendering.CalibratedDxfRenderer[0]
      Renderização concluída para /tmp/fw/dobras/NR120184.dxf. Dimensões=2000x595 px | DPI efetivo≈15.77 | faixas combinadas=False | moldura ignorada=False | fallback filtro=False
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      Iniciando upload da imagem renderizada (hash=sha256:e7773a2c833677ca7c7a63e4661045413b06cf301e1c1c637a1d5084ff1f56df)
info: FileWatcherApp.Services.DXFAnalysis.Storage.S3ImageStorageClient[0]
      Enviando imagem para facas-renders/renders/sha256_e7773a2c833677ca7c7a63e4661045413b06cf301e1c1c637a1d5084ff1f56df/nr120184.png (tentativa 1/3)
info: FileWatcherApp.Services.DXFAnalysis.Storage.S3ImageStorageClient[0]
      Upload concluído para facas-renders/renders/sha256_e7773a2c833677ca7c7a63e4661045413b06cf301e1c1c637a1d5084ff1f56df/nr120184.png (ETag="bc60c53e6e36925408f6f4a460d604fc")
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      Upload concluído: facas-renders/renders/sha256_e7773a2c833677ca7c7a63e4661045413b06cf301e1c1c637a1d5084ff1f56df/nr120184.png (uploaded)
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      Resultado publicado analysisId=39508d15-decf-45d8-ab51-e2dc6d5ca904 file=NR120184.dxf score=5 duration=826ms
info: Microsoft.Hosting.Lifetime[0]
      Application is shutting down...
info: FileWatcherApp.Services.DXFAnalysis.DXFAnalysisWorker[0]
      Parando DXFAnalysisWorker...
info: FileWatcherApp.Services.FileWatcher.FileWatcherService[0]
      Encerrando FileWatcherService...
info: FileWatcherApp.Messaging.RpcPingResponderService[0]
      Encerrando RpcPingResponderService...
