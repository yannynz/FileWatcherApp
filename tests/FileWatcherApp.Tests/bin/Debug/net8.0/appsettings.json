{
  "RabbitMq": {
    "HostName": "192.168.0.116",
    "Port": 5672,
    "UserName": "guest",
    "Password": "guest",
    "VirtualHost": "/",
    "Queue": "filewatcher.rpc.ping",
    "Prefetch": 1,
    "AutomaticRecoveryEnabled": true,
    "TopologyRecoveryEnabled": true,
    "RequestedHeartbeatSeconds": 30
  },
  "FileWatcher": {
    "Version": "1.0.0"
  },
  "DXFAnalysis": {
    "WatchFolder": "C:\\FacasDXF",
    "OutputImageFolder": "C:\\FacasDXF\\Renders",
    "RabbitQueueRequest": "facas.analysis.request",
    "RabbitQueueResult": "facas.analysis.result",
    "ImageDpi": 300,
    "ImagePadding": 20,
    "DefaultUnit": "mm",
    "Parallelism": 4,
    "ReprocessSameHash": false,
    "MinCurveRadiusTolerance": 0.01,
    "GapTolerance": 0.05,
    "OverlapTolerance": 0.05,
    "ChordTolerance": 0.2,
    "ParseTimeout": "00:00:20",
    "RenderTimeout": "00:00:15",
    "CacheFolder": "C:\\FacasDXF\\Cache",
    "Cache": {
      "Bypass": false
    },
    "PersistLocalImageCopy": false,
    "ImageStorage": {
      "Enabled": true,
      "Provider": "s3",
      "Bucket": "facas-renders",
      "KeyPrefix": "renders",
      "Endpoint": "http://192.168.0.116:9000",
      "Region": "us-east-1",
      "AccessKey": "minio",
      "SecretKey": "minio123",
      "UsePathStyle": true,
      "PublicBaseUrl": "http://192.168.0.116:9000/facas-renders",
      "SkipIfExists": true,
      "UploadTimeout": "00:00:20",
      "MaxRetries": 3
    },
    "Version": "complexity-engine/1.0.0",
    "ShadowMode": false,
    "RabbitMq": {
      "HostName": "192.168.0.116",
      "Port": 5672,
      "UserName": "guest",
      "Password": "guest",
      "VirtualHost": "/",
      "AutomaticRecoveryEnabled": true,
      "RequestedHeartbeatSeconds": 30,
      "PrefetchCount": 8
    },
    "LayerMapping": {
      "corte": [ "^CUT$", "^CORTE$", "CUTTER", "^FACA_PONTES$", "^LAYOUT_PONTES$" ],
      "vinco": [ "VINCO", "FOLD", "SCORE" ],
      "serrilha": [ "SERRILHA", "PERF" ],
      "serrilha_mista": [ "MISTA" ],
      "trespt": [ "3PT", "THREE_PT", "THREE-POINT", "VINCO3PT", "VINCO_3PT" ]
    },
    "SpecialMaterialLayerMapping": {
      "adesivo": [ "ADES", "ADESIVO", "LAM_ADESIVO", "SEL[_\\s-]*COLA", "^COLA$", "SELAGEM" ],
      "borracha": [ "BORRACHA", "GOMA" ],
      "vinil": [ "VINIL", "VINYL" ],
      "plastico": [ "PLAST", "PLASTIC", "PVC", "PET" ],
      "poliester": [ "POLI", "POLYESTER" ]
    },
    "SerrilhaSymbols": [
      {
        "SymbolNamePattern": "^SERRILHA_FINA$",
        "SemanticType": "serrilha_fina",
        "BladeCode": "FINA_PADRAO",
        "DefaultToothCount": 40,
        "DefaultLength": 100.0
      },
      {
        "SymbolNamePattern": "^SERRILHA_MISTA_[A-Z]+$",
        "AttributePattern": "LAMINA\\s*MISTA",
        "SemanticType": "serrilha_mista",
        "BladeCode": "MISTA",
        "DefaultToothCount": 28
      },
      {
        "SymbolNamePattern": "^SERRILHA_ZIPPER$",
        "SemanticType": "serrilha_zipper",
        "BladeCode": "ZIPPER"
      }
    ],
    "SerrilhaTextSymbols": [
      {
        "TextPattern": "(?<code>[A-Z])\\s*[-=]\\s*(?<descriptor>[0-9]+(?:x[0-9\\.,]+)?)\\s+(?<length>[0-9]+[\\.,]?[0-9]*)(?:\\s+(?<teeth>[0-9]+)\\s*(?:d|dentes?)?)?",
        "SemanticType": "serrilha",
        "SemanticTypeGroup": "code",
        "SemanticTypeFormat": "serrilha_{value}",
        "BladeCodeGroup": "descriptor",
        "UppercaseBladeCode": false,
        "UppercaseSemanticType": true,
        "AllowMultipleMatches": true,
        "LengthGroup": "length",
        "LengthScale": 1.0,
        "ToothCountGroup": "teeth",
        "ToothCountScale": 1.0
      }
    ],
    "CorteSeco": {
      "Enabled": true,
      "MaxParallelAngleDegrees": 5.0,
      "MaxOffsetMillimeters": 0.45,
      "MinOverlapRatio": 0.65,
      "MinLengthMillimeters": 8.0,
      "MinPairCount": 1,
      "TargetLayerTypes": [ "serrilha", "serrilha_mista", "corte" ]
    },
    "Scoring": {
      "TotalCutLength": 2000.0,
      "TotalCutLengthWeight": 0.75,
      "NumCurves": 60,
      "NumCurvesWeight": 0.6,
      "NumCurvesExtraThresholds": [
        { "Threshold": 140, "Weight": 0.25 },
        { "Threshold": 220, "Weight": 0.35 },
        { "Threshold": 360, "Weight": 0.4 },
        { "Threshold": 520, "Weight": 0.5 }
      ],
      "NumCurvesStep": 45,
      "NumCurvesStepWeight": 0.2,
      "NumCurvesStepMaxContribution": 1.2,
      "MinArcRadiusMax": 0.0,
      "BonusIntersections": 60,
      "BonusIntersectionsWeight": 0.4,
      "IntersectionThresholds": [
        { "Threshold": 120, "Weight": 0.6 },
        { "Threshold": 180, "Weight": 0.75 },
        { "Threshold": 240, "Weight": 0.9 }
      ],
      "DanglingEndThresholds": [
        { "Threshold": 250, "Weight": 0.15 },
        { "Threshold": 650, "Weight": 0.25 },
        { "Threshold": 1100, "Weight": 0.5 },
        { "Threshold": 1800, "Weight": 0.8 }
      ],
      "MinRadius": {
        "DangerThreshold": 0.35,
        "NeutralThreshold": 1.0,
        "PenaltyWeight": 0.65,
        "CorteSecoAdjustment": 0.55,
        "CorteSecoPairThresholds": [
          { "Threshold": 2, "Weight": 0.35 },
          { "Threshold": 4, "Weight": 0.45 }
        ]
      },
      "Serrilha": {
        "PresenceWeight": 0.65,
        "MistaWeight": 0.85,
        "MultiTypeWeight": 0.35,
        "MultiTypeThreshold": 2,
        "ManualBladeWeight": 0.45,
        "ManualBladeCodes": [ "MANUAL" ],
        "TravadaWeight": 0.8,
        "ZipperWeight": 0.6,
        "DiversityWeight": 0.4,
        "DiversityThreshold": 2,
        "DistinctBladeWeight": 0.25,
        "DistinctBladeThreshold": 2,
        "CorteSecoMultiTypeWeight": 0.45,
        "TotalCountThresholds": [
          { "Threshold": 4, "Weight": 0.25 },
          { "Threshold": 8, "Weight": 0.35 },
          { "Threshold": 14, "Weight": 0.45 }
        ],
        "MistaCountThresholds": [
          { "Threshold": 2, "Weight": 0.35 },
          { "Threshold": 4, "Weight": 0.45 }
        ],
        "TravadaCountThresholds": [
          { "Threshold": 2, "Weight": 0.3 },
          { "Threshold": 5, "Weight": 0.4 }
        ],
        "ColaSemanticHints": [ "COLA", "SER_COL", "SER-COL", "COL" ],
        "ColaWeight": 0.45,
        "ColaCountThresholds": [
          { "Threshold": 2, "Weight": 0.35 },
          { "Threshold": 5, "Weight": 0.45 }
        ],
        "SmallPieceMaxCount": 2,
        "SmallPieceMaxTotalLength": 80.0,
        "SmallPieceAdjustment": -0.4
      },
      "ClosedLoops": {
        "CountThresholds": [
          { "Threshold": 2, "Weight": 0.15 },
          { "Threshold": 4, "Weight": 0.2 },
          { "Threshold": 8, "Weight": 0.2 },
          { "Threshold": 20, "Weight": 0.25 },
          { "Threshold": 40, "Weight": 0.8 }
        ],
        "VarietyThreshold": 2,
        "VarietyWeight": 0.3,
        "DensityThresholds": [
          { "Threshold": 4.5e-05, "Weight": 0.25 },
          { "Threshold": 5.5e-05, "Weight": 0.8 }
        ]
      },
      "ThreePt": {
        "LengthThresholds": [
          { "Threshold": 150, "Weight": 0.35 },
          { "Threshold": 300, "Weight": 0.45 }
        ],
        "SegmentThresholds": [
          { "Threshold": 6, "Weight": 0.3 },
          { "Threshold": 12, "Weight": 0.3 }
        ],
        "RatioThresholds": [
          { "Threshold": 0.08, "Weight": 0.3 },
          { "Threshold": 0.15, "Weight": 0.35 }
        ],
        "ManualHandlingWeight": 0.45
      },
      "CurveDensity": {
        "DensityThresholds": [
          { "Threshold": 0.0005, "Weight": 0.2 },
          { "Threshold": 0.00055, "Weight": 0.5 }
        ],
        "DelicateArcCountThresholds": [
          { "Threshold": 12, "Weight": 0.25 },
          { "Threshold": 28, "Weight": 0.35 }
        ]
      },
      "Materials": {
        "DefaultWeight": 0.45,
        "Overrides": {
          "adesivo": 1.0,
          "vinil": 0.75,
          "plastico": 0.7,
          "pvc": 0.7,
          "borracha": 0.55
        },
        "KeywordOverrides": {
          "ades": 0.9,
          "lam_adesivo": 0.95,
          "lam adesivo": 0.95,
          "selagem": 0.9,
          "vinil": 0.75,
          "plast": 0.7
        }
      }
    },
    "Telemetry": {
      "EnableMetrics": true,
      "MeterName": "FileWatcherApp.DXFAnalysis"
    }
  }
}
